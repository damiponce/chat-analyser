(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{57323:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return gt}});var r=n(85893),o=n(67294),i=n(9008),a=n(95602),s=n.n(a),d=n(41664),l=function(t){var e=t.children;return(0,r.jsxs)("div",{className:s().container,children:[(0,r.jsx)(i.default,{children:(0,r.jsx)("link",{rel:"icon",href:"/favicon.ico"})}),(0,r.jsx)("header",{className:s().header,children:(0,r.jsx)(d.default,{href:"/",passHref:!0,children:(0,r.jsx)("a",{children:(0,r.jsxs)("a",{className:s().title,children:["chat",(0,r.jsx)("span",{className:s().title_accent,children:"analyser"})]})})})}),(0,r.jsx)("main",{children:e}),(0,r.jsx)("div",{className:s().footer})]})},u=n(89954),f=n.n(u),c=n(87757),p=n.n(c),h=n(15861),_=(n(73935),n(92361));function y(t){t.id;var e=t.pythonCode,i=t.loadingMessage,a=void 0===i?"Loading Python...":i,s=t.evaluatingMessage,d=void 0===s?"Loading Python...":s,l=t.processingMessage,u=void 0===l?"Processing data...":l,f=t.onPythonOutput,c=t.currentStatus,y=(0,o.useContext)(_.G),m=y.pyodide,g=y.hasLoadPyodideBeenCalled,x=y.isPyodideLoading,v=y.setIsPyodideLoading,b=(0,o.useState)(d),j=b[0],w=b[1];return(0,o.useEffect)((function(){g.current||(g.current=!0,(0,h.Z)(p().mark((function t(){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.g.loadPyodide({indexURL:"https://cdn.jsdelivr.net/pyodide/v0.18.0/full/"});case 2:m.current=t.sent,v(!1);case 4:case"end":return t.stop()}}),t)})))())}),[m,g,v]),(0,o.useEffect)((function(){if(!x){var t=function(){var t=(0,h.Z)(p().mark((function t(e,n){return p().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.loadPackage("numpy");case 3:return t.next=5,e.loadPackage("pandas");case 5:return t.next=7,e.runPython(n);case 7:return t.abrupt("return",t.sent);case 10:return t.prev=10,t.t0=t.catch(0),console.error(t.t0),t.abrupt("return","Error evaluating Python code. See console for details.");case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e,n){return t.apply(this,arguments)}}();(0,h.Z)(p().mark((function n(){return p().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.t0=w,n.next=3,t(m.current,e);case 3:n.t1=n.sent,(0,n.t0)(n.t1);case 5:case"end":return n.stop()}}),n)})))()}}),[x,m,e]),(0,o.useEffect)((function(){j!==d&&f(j,m)}),[j]),(0,o.useEffect)((function(){c(x?a:j===d?d:u)}),[x,j]),(0,r.jsx)(r.Fragment,{})}var m=n(49429),g=n.n(m),x=n(85753),v=n.n(x),b=n(16214),j=n(31275),w=n.n(j),k=function(t){var e=g()({restrictions:{maxNumberOfFiles:1,allowedFileTypes:[".txt"]},autoProceed:!0});return e.use(v(),{endpoint:"/upload"}),e.on("upload-success",(function(t,e){console.log(t)})),e.on("error",(function(t){console.error(t.stack)})),e.on("upload-progress",(function(t,e){console.log(t.id,e.bytesUploaded,e.bytesTotal)})),e.on("file-added",(function(e){t.onFileAdded(e)})),(0,r.jsx)("div",{className:"uploader_box",children:t.currentMessage?(0,r.jsx)("div",{className:"uppy-DragDrop-container uppy-DragDrop--isDragDropSupported",children:(0,r.jsx)("h1",{className:"uppy-DragDrop-inner "+w().message,children:t.currentMessage})}):(0,r.jsx)(b.v0,{uppy:e,locale:{strings:{dropHereOr:"Drop here or %{browse}",browse:"browse"}}})})};function S(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return O(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return O(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function O(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var Z=n(12242),P=n(22075),M=n(4942),A=n(86331),D=n(25002),T=n(18115),E=n(37034),L=n(54961),N=n(23865),H=n(98823),C=n(99599),F=n(85885),R=n(29223),W=n(41788),z=n(65165),I="#0070f3aa",q={textAnchor:"middle",fontFamily:"Lexend",fontSize:10,fill:I.slice(0,-2)},J={dx:"-0.25em",dy:"0.25em",fontFamily:"Lexend",fontSize:10,textAnchor:"end",fill:I.slice(0,-2)};function B(t){var e=t.data,n=t.gradientColor,o=t.width,i=t.yMax,a=t.margin,s=t.xScale,d=t.yScale,l=t.hideBottomAxis,u=void 0!==l&&l,f=t.hideLeftAxis,c=void 0!==f&&f,p=t.top,h=t.left,_=t.children;return o<10?null:(0,r.jsxs)(C.Z,{left:h||a.left,top:p||a.top,children:[(0,r.jsx)(L.Z,{id:"gradient",from:n,fromOpacity:.15,to:n,toOpacity:0}),(0,r.jsx)(F.Z,{data:e,x:function(t){return s(function(t){return new Date(t.date)}(t))||0},y:function(t){return d(function(t){return t.qty}(t))||0},yScale:d,strokeWidth:1,stroke:n,fill:"url(#gradient)",curve:z.Z}),!u&&(0,r.jsx)(R.Z,{top:i,scale:s,numTicks:o>520?10:5,stroke:I,tickStroke:I,tickLabelProps:function(){return q}}),!c&&(0,r.jsx)(W.Z,{scale:d,numTicks:5,stroke:I,tickStroke:I,tickLabelProps:function(){return J}}),_]})}var U=n(98649),Q=n(89163),X=n(70186),Y=n(93382),$=n(42816),G=n(73850),V=n(29173),K=n(64605);function tt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function et(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?tt(Object(n),!0).forEach((function(e){(0,M.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var nt=(0,X.Z)((function(t){var e=t.data,n=t.xScale,i=t.yScale,a=t.yMax,s=t.width,d=t.height,l=t.gradientColor,u=t.margin,f=void 0===u?{top:0,right:0,bottom:0,left:0}:u,c=t.showTooltip,p=t.hideTooltip,h=t.tooltipData,_=t.tooltipTop,y=void 0===_?0:_,m=t.tooltipLeft,g=void 0===m?0:m,x=t.hideBottomAxis,v=t.hideLeftAxis,b=t.top,j=t.left;t.children;if(s<10)return null;var w=e,k="#3b6978",S="#edffea",O=et(et({},Y.j),{},{background:k,border:"1px solid white",color:"white",width:40,height:40}),Z="#0070f3aa",P={textAnchor:"middle",fontFamily:"Lexend",fontSize:10,fill:Z.slice(0,-2)},M={dx:"-0.25em",dy:"0.25em",fontFamily:"Lexend",fontSize:10,textAnchor:"end",fill:Z.slice(0,-2)},T=Math.max(s-f.left-f.right,0),E=(0,K.i$)("%b %d, '%y"),I=function(t){return new Date(t.date)},q=function(t){return t.qty},J=(0,V.Z)((function(t){return new Date(t.date)})).left,B=(f.left,f.right,d-f.top-f.bottom),X=(0,o.useMemo)((function(){return(0,A.Z)({range:[0,T],domain:(0,N.Z)(e,I)})}),[T,e]),tt=(0,o.useMemo)((function(){return(0,D.Z)({range:[a,0],domain:[0,(0,H.Z)(e,q)||0],nice:!0})}),[a,e]),nt=j||f.left,rt=(0,o.useCallback)((function(t){var e=((0,G.Z)(t)||{x:0}).x,n=X.invert(e-nt),r=J(w,n,1),o=w[r-1],i=w[r],a=o;i&&I(i)&&(a=n.valueOf()-I(o).valueOf()>I(i).valueOf()-n.valueOf()?i:o),c({tooltipData:a,tooltipLeft:e,tooltipTop:tt(q(a))})}),[c,tt,X]);return(0,r.jsx)(r.Fragment,{children:(0,r.jsxs)("svg",{width:s,height:d,children:[(0,r.jsxs)(C.Z,{left:j||f.left,top:b||f.top,children:[(0,r.jsx)(L.Z,{id:"area-background-gradient",from:k,to:"#204051"}),(0,r.jsx)(L.Z,{id:"area-gradient",from:S,to:S,toOpacity:.1}),(0,r.jsx)(L.Z,{id:"gradient",from:l,fromOpacity:.3,to:l,toOpacity:0}),(0,r.jsx)(F.Z,{data:w,x:function(t){return X(I(t))||0},y:function(t){return tt(q(t))||0},yScale:tt,strokeWidth:1,stroke:l,fill:"url(#gradient)",curve:z.Z}),(0,r.jsx)(U.Z,{x:0,y:0,width:s,height:d,fill:"transparent",rx:14,onTouchStart:rt,onTouchMove:rt,onMouseMove:rt,onMouseLeave:function(){return p()}}),!x&&(0,r.jsx)(R.Z,{top:a,scale:n,numTicks:s>520?10:5,stroke:Z,tickStroke:Z,tickLabelProps:function(){return P}}),!v&&(0,r.jsx)(W.Z,{scale:i,numTicks:5,stroke:Z,tickStroke:Z,tickLabelProps:function(){return M}}),h&&(0,r.jsxs)("g",{children:[(0,r.jsx)(Q.Z,{from:{x:g-nt,y:f.top},to:{x:g-nt,y:B+f.top},stroke:l,strokeWidth:2,pointerEvents:"none",strokeDasharray:"5,2"}),(0,r.jsx)("circle",{cx:g-nt,cy:y+1,r:4,fill:"black",fillOpacity:.1,stroke:"black",strokeOpacity:.1,strokeWidth:2,pointerEvents:"none"}),(0,r.jsx)("circle",{cx:g-nt,cy:y,r:4,fill:l,stroke:"white",strokeWidth:2,pointerEvents:"none"})]})]}),h&&(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)($.Z,{top:y-12,left:g+12,style:O,children:"HOLA"},Math.random()),(0,r.jsx)(Y.Z,{top:B+f.top-14,left:g,style:et(et({},Y.j),{},{minWidth:72,textAlign:"center",transform:"translateX(-50%)"}),children:E(I(h))})]})]})})}),{style:{}},(function(t,e){return(0,r.jsx)(r.Fragment,{children:t})}));function rt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ot(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?rt(Object(n),!0).forEach((function(e){(0,M.Z)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var it="#0070f3";var at=function(t){var e=t.compact,n=void 0!==e&&e,i=t.width,a=t.height,s=t.margin,d=void 0===s?{top:20,left:50,bottom:20,right:20}:s,l=t.data,u=(t.enabled,l),f={top:10,bottom:15,left:50,right:20},c="brush_pattern",p={fill:"url(#".concat(c,")"),stroke:it},h=function(t){return new Date(t.date)},_=function(t){return t.qty},y=(0,o.useRef)(null),m=(0,o.useState)(u),g=m[0],x=m[1],v=a-d.top-d.bottom,b=n?15:40,j=.8*v-b,w=v-j-30,k=Math.max(i-d.left-d.right,0),S=Math.max(j,0),O=Math.max(i-f.left-f.right,0),Z=Math.max(w-f.top-f.bottom,0),P=(0,o.useMemo)((function(){return(0,A.Z)({range:[0,k],domain:(0,N.Z)(g,h)})}),[k,g]),M=(0,o.useMemo)((function(){return(0,D.Z)({range:[S,0],domain:[0,(0,H.Z)(g,_)||0],nice:!0})}),[S,g]),C=(0,o.useMemo)((function(){return(0,A.Z)({range:[0,O],domain:(0,N.Z)(u,h)})}),[O]),F=(0,o.useMemo)((function(){return(0,D.Z)({range:[Z,0],domain:[0,(0,H.Z)(u,_)||0],nice:!0})}),[Z]),R=(0,o.useMemo)((function(){return{start:{x:C(h(u[0]))},end:{x:C(h(u[0]))}}}),[C]);return(0,r.jsx)("div",{id:"chart_main",children:(0,r.jsxs)("svg",{width:i,height:a,children:[(0,r.jsx)(L.Z,{id:"brush_gradient",from:"#535da6",to:"#ececec",rotate:45}),(0,r.jsx)("rect",{x:1.5,y:1.5,width:i-3,height:a-3,fill:"#0000",stroke:"#0000",strokeWidth:3,strokeLinejoin:"round",strokeLinecap:"round",strokeDasharray:"10 10",rx:14}),(0,r.jsx)(nt,{hideBottomAxis:n,data:g,width:i,height:j+b,margin:ot(ot({},d),{},{bottom:b}),yMax:S,xScale:P,yScale:M,gradientColor:"#0070f3"}),(0,r.jsxs)(B,{hideBottomAxis:!0,hideLeftAxis:!0,data:u,width:i,yMax:Z,xScale:C,yScale:F,margin:f,top:j+b+d.top,gradientColor:"#0070f388",children:[(0,r.jsx)(E.Z,{id:c,height:10,width:10,stroke:it,strokeWidth:1,orientation:["diagonalRightToLeft"]}),(0,r.jsx)(T.Z,{xScale:C,yScale:F,width:O,height:Z,margin:f,handleSize:8,innerRef:y,resizeTriggerAreas:["left","right"],brushDirection:"horizontal",initialBrushPosition:R,onChange:function(t){if(t){var e=t.x0,n=t.x1,r=t.y0,o=t.y1,i=u.filter((function(t){var i=h(t).getTime(),a=_(t);return i>e&&i<n&&a>r&&a<o}));x(i)}},onClick:function(){return x(u)},selectedBoxStyle:p,useWindowMoveEvents:!0})]})]})})},st=n(19892),dt=n(55490),lt=n(12383),ut=n(61217);function ft(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return ct(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ct(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function ct(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var pt={top:40,right:0,bottom:40,left:0};function ht(t){var e,n=t.width,o=t.height,i=t.events,a=void 0===i||i,s=t.margin,d=void 0===s?pt:s,l=t.data,u=t.colours,f=Object.keys(l[0]).filter((function(t){return"label"!==t})),c=((0,K.Z1)("%Y-%m-%d"),(0,K.i$)("%b %d"),(0,lt.Z)({domain:l.map((function(t){return t.label})),padding:.2,paddingOuter:.3})),p=(0,lt.Z)({domain:f,padding:.1}),h=[],_=ft(l);try{for(_.s();!(e=_.n()).done;){var y=e.value,m={label:""};for(var g in y)m[g]="label"===g?y[g]:y[g].mean;h.push(m)}}catch(k){_.e(k)}finally{_.f()}var x=h.reduce((function(t,e){var n=f.reduce((function(t,n){return t+=Number(e[n])}),0);return t.push(n),t}),[]),v=(0,D.Z)({domain:[0,Math.max.apply(Math,(0,st.Z)(x))]}),b=(0,ut.Z)({domain:f,range:["#aeeef8","#e5fd3d","#9caff6"]}),j=n-d.left-d.right,w=o-d.top-d.bottom;c.rangeRound([0,j]),p.rangeRound([0,c.bandwidth()]),v.range([w,0]);return n<10?null:(0,r.jsx)("div",{id:"chart_main",children:(0,r.jsxs)("svg",{width:n,height:o,children:[(0,r.jsx)("rect",{x:1.5,y:1.5,width:n-3,height:o-3,fill:"#0000",stroke:"#0000",strokeWidth:3,strokeLinejoin:"round",strokeLinecap:"round",strokeDasharray:"10 10",rx:14}),(0,r.jsx)(C.Z,{top:d.top,left:d.left,children:(0,r.jsx)(dt.Z,{data:h,keys:f,x:function(t){return t.label},xScale:c,yScale:v,color:b,children:function(t){return t.map((function(e){return e.bars.map((function(n){return(0,r.jsx)(r.Fragment,{children:(0,r.jsx)("rect",{x:n.x,y:n.y,height:n.height,width:n.width,fill:u[e.index],onClick:function(){a&&(console.log("==>>>>====================="),console.log(h),console.log(t),console.log(e),console.log(n),console.log("==>>>>===================== "),alert(JSON.stringify(n)))}},"bar-stack-".concat(e.index,"-").concat(n.index))})}))}))}})}),(0,r.jsx)(R.Z,{top:w+d.top,tickFormat:function(t){return t},scale:c,stroke:"#0070f3",tickStroke:"#0070f3",hideAxisLine:!0,tickLabelProps:function(){return{fill:"#0070f3",fontSize:11,textAnchor:"middle"}},numTicks:24})]})})}function _t(t,e,n){var r,o,i;if(0==e)r=o=i=n;else{var a=function(t,e,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?t+6*(e-t)*n:n<.5?e:n<2/3?t+(e-t)*(2/3-n)*6:t},s=n<.5?n*(1+e):n+e-n*e,d=2*n-s;r=a(d,s,t+1/3),o=a(d,s,t),i=a(d,s,t-1/3)}return[255*r,255*o,255*i]}function yt(t,e){var n;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"===typeof t)return mt(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return mt(t,e)}(t))||e&&t&&"number"===typeof t.length){n&&(t=n);var r=0,o=function(){};return{s:o,n:function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,a=!0,s=!1;return{s:function(){n=t[Symbol.iterator]()},n:function(){var t=n.next();return a=t.done,t},e:function(t){s=!0,i=t},f:function(){try{a||null==n.return||n.return()}finally{if(s)throw i}}}}function mt(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}var gt=function(){var t=(0,o.useState)(),e=t[0],i=t[1],a=(0,o.useState)(),s=a[0],d=a[1],u=(0,o.useState)(),c=u[0],p=u[1],h=(0,o.useState)(),_=h[0],m=h[1],g=(0,o.useState)(!1),x=g[0],v=g[1],b=(0,o.useState)(),j=b[0],w=b[1],O=(0,o.useState)(),M=O[0],A=O[1],D=(0,o.useState)(),T=D[0],E=D[1],L=(0,o.useState)(),N=L[0],H=L[1],C=(0,o.useState)(),F=C[0],R=C[1],W=(0,o.useState)([]),z=W[0],I=W[1],q=(0,o.useState)([]),J=q[0],B=q[1],U=(0,o.useState)([]),Q=U[0],X=U[1];(0,o.useEffect)((function(){"undefined"!==typeof e&&console.log(e)}),[e]),(0,o.useEffect)((function(){if(!0===x){console.log("============= PYTHON =============");var t=c.current.globals.get("pd"),n={user:e[1],msg:e[2]};c.current.globals.set("data",n),c.current.globals.set("index",e[0]),c.current.runPython('\n            df = pd.DataFrame(data=data.to_py(), index=pd.to_datetime(index.to_py(), format="%Y%m%d%H%M"))\n         '),c.current.runPython(P),w(void 0),A(void 0),E(void 0),H(void 0),R(void 0),I([]),X([]);var r=function(t,e,n,r,o){return(t-e)*(o-r)/(n-e)+r},o=c.current.globals.get("df_user_list").toJs();I(o);for(var i=[],a=[],s=0;s<=o.length;s++){i.push(!0);var d,l="#",u=yt(_t(Math.random(),r(Math.random(),0,1,.4,.6),r(Math.random(),0,1,.3,.7)));try{for(u.s();!(d=u.n()).done;){var f=d.value;l+=Math.round(f).toString(16)}}catch(st){u.e(st)}finally{u.f()}a.push(l)}console.log("USER ARR: "),console.log(o),console.log("STATE ARR: "),console.log(i),X(i),B(a);var p,h=[],_=yt(c.current.globals.get("df_timeline_dict").toJs());try{for(_.s();!(p=_.n()).done;){var y=p.value;h.push(JSON.parse(y))}}catch(st){_.e(st)}finally{_.f()}for(var g=[],v=0,b=h;v<b.length;v++){var j,k=b[v],S=[],O=0,Z=yt(k.index);try{for(Z.s();!(j=Z.n()).done;){var M=j.value;S.push({date:M,qty:k.data[O][0]}),O++}}catch(st){Z.e(st)}finally{Z.f()}g.push(S)}w(g);var D,T=[],L=yt(c.current.globals.get("df_daily_stats_dict").toJs());try{for(L.s();!(D=L.n()).done;){var N=D.value;T.push(JSON.parse(N))}}catch(st){L.e(st)}finally{L.f()}var C=[];for(var F in T[0]){for(var W={label:F},z=0;z<T.length;z++){var q=T[z][F];W[o[z]]={boxPlot:{min:q.min,firstQuartile:q["25%"],median:q["50%"],thirdQuartile:q["75%"],max:q.max,outliers:q.outliers},binData:[{value:0,count:0}],mean:q.mean}}C.push(W)}console.log("===================================="),console.log(C),console.log("===================================="),A(C);var J,U=[],Q=yt(c.current.globals.get("df_hourly_stats_dict").toJs());try{for(Q.s();!(J=Q.n()).done;){var Y=J.value;U.push(JSON.parse(Y))}}catch(st){Q.e(st)}finally{Q.f()}var $=[];for(var G in U[0]){for(var V={label:G},K=0;K<U.length;K++){var tt=U[K][G];V[o[K]]={boxPlot:{min:tt.min,firstQuartile:tt["25%"],median:tt["50%"],thirdQuartile:tt["75%"],max:tt.max,outliers:tt.outliers},binData:[{value:0,count:0}],mean:tt.mean}}$.push(V)}console.log("===================================="),console.log($),console.log("===================================="),E($);var et=JSON.parse(c.current.globals.get("df_heatmap")),nt=[];for(var rt in O=0,et){var ot=[];for(var it in et[rt]){var at=et[rt][it];ot.unshift({bin:0,count:null!==at&&void 0!==at?at:0})}nt.push({bin:parseInt(rt),bins:ot}),O++}return H(nt),R(c.current.globals.get("df_words")),t.destroy(),void m(void 0)}}),[x,e]),(0,o.useEffect)((function(){console.log(s)}),[s]);return(0,r.jsxs)(l,{children:[e?(0,r.jsx)(y,{id:"a",pythonCode:Z,onPythonOutput:function(t,e){return d(t),p(e),v(!0)},currentStatus:function(t){m(t)}}):null,(0,r.jsx)(k,{onFileAdded:function(t){return t.data.text().then((function(t){i(function(t){var e="undefined"!==typeof n.g?n(30709):null,r=t.split("\n"),o=[],i=[],a=[];console.log("Messages: "+r.length);for(var s=0;s<r.length;s++){var d="",l=[],u="",f=[],c="",p="",h=999999,_=0,y=!0;r[s].length<19&&(y=!1);var m,g=new RegExp(/^\d{2}[\/\-]\d{2}[\/\-]\d{4}/gm),x=new RegExp(/\d{2}[\:]\d{2}/gm),v=S(r[s]);try{for(v.s();!(m=v.n()).done;){var b=m.value;_<10&&(d+=b),(10!==_||(g.test(r[s])?l=d.split("/"):y=!1,y))&&(_>11&&_<17&&(u+=b),18===_&&(x.test(r[s])?f=u.split(":"):y=!1),_>19&&_<h&&(":"===b?h=_+1:c+=b),_>h&&"\n"!==b&&(p+=b),_++)}}catch(w){v.e(w)}finally{v.f()}if(!(!1===y||r[s].substring(18).indexOf(":")<0)){new Date(l[2],l[1],l[0],f[0],f[1]);var j=l[2]+l[1]+l[0]+f[0]+f[1];o.push(j),i.push(c),a.push(p)}}return new e.DataFrame({user:i,msg:a},{index:o}),[o,i,a]}(t))}))},currentMessage:_}),j&&M&&T&&N&&F?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:f().section,children:[(0,r.jsx)(at,{width:800,height:500,data:j[j.length-1],enabled:Q}),(0,r.jsxs)("div",{className:f().details,children:[(0,r.jsx)("h1",{className:f().graph_title,children:"Timeline"}),(0,r.jsx)("div",{onChange:function(t){var e=Q;e[t.target.value]=!e[t.target.value],X(e),console.log(Q)},className:f().radio_group,children:j.map((function(t,e,n){return(0,r.jsxs)("label",{children:[(0,r.jsx)("input",{defaultChecked:!0,type:"checkbox",value:e}),e<z.length?z[e]:"Total"]},e)}))})]})]}),(0,r.jsx)("div",{className:f().section,children:(0,r.jsx)(ht,{width:800,height:500,data:M,colours:J})}),(0,r.jsx)("div",{className:f().section,children:(0,r.jsx)(ht,{width:800,height:500,data:T,colours:J})})]}):null]})}},45301:function(t,e,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(57323)}])},89954:function(t){t.exports={container:"Home_container__3sao-",main:"Home_main__1Z1aG",footer:"Home_footer__2v49s",title:"Home_title__28pEg",description:"Home_description__3GmI3",code:"Home_code__2X25X",grid:"Home_grid__QT_Bm",card:"Home_card__PT3hq",logo:"Home_logo__3GqVp",section:"Home_section__354aW",details:"Home_details__1mwyE",graph_title:"Home_graph_title__sb7CV",graph:"Home_graph__3p2XH",radio_group:"Home_radio_group__1sRi-"}},31275:function(t){t.exports={message:"Uploader_message__s8zxE"}},95602:function(t){t.exports={container:"layout_container__3H2Qg",title:"layout_title__2RqYF",title_accent:"layout_title_accent__ZDrzf",header:"layout_header__2VgCa",footer:"layout_footer__1UWVy"}},12242:function(t){"use strict";t.exports="import numpy as np\nimport pandas as pd\n\ndef users(df):\n   df_users = df.groupby([\"user\"])\n   temp = []\n   for i, group in enumerate(df_users.groups):\n      temp.append(df_users.get_group(group))\n   return temp\n\ndef get_users(df):\n   df_users = df.groupby([\"user\"])\n   temp = []\n   print(\">->\")\n   for i, group in enumerate(df_users.groups):\n      print(group)\n      temp.append(group)\n   print(\">->\")      \n   return temp\n\ndef group_func(df_list, func):\n   temp = []\n   for e in df_list:\n      temp.append(func(e))\n   return temp\n\ndef timeline(df):\n  return df.resample(\"D\").count().drop(columns=[\"user\"])\n   \ndef daily(df):\n   df_daily = df.resample(\"D\").count()\n   df_daily['weekday'] = df_daily.index.day_name()\n   df_daily['day'] = df_daily.index\n   df_daily = df_daily.pivot(index='day', columns='weekday', values='user')\n   df_daily = df_daily[['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday', ]]\n   # print(df_daily.columns)\n   return df_daily\n\ndef hourly(df):\n   df_hourly = df.resample(\"H\").count()\n   df_hourly['hour'] = df_hourly.index.hour\n   df_hourly['day'] = df_hourly.index\n   # df_hourly_mean = df_hourly.groupby(['hour']).mean()\n   df_hourly = df_hourly.pivot(index='day', columns='hour', values='user')\n   # df_hourly.iloc[0] = df_hourly.iloc[0].astype(object)\n   df_hourly.columns = df_hourly.columns.astype(str)\n   return df_hourly\n\ndef boxplot(df):\n   df_daily_stats = df.describe()\n   df_daily_stats.loc[\"iqr\"] = df_daily_stats.loc['75%'] - df_daily_stats.loc['25%']\n   df_daily_stats.loc[\"min\"] = df_daily_stats.loc['25%'] - 1.5 * df_daily_stats.loc['iqr']\n   df_daily_stats[df_daily_stats < 0] = 0\n   df_daily_stats.loc[\"max\"] = df_daily_stats.loc['75%'] + 1.5 * df_daily_stats.loc['iqr']\n   df_daily_outliers = df[(df > df_daily_stats.loc['max']) | (df < df_daily_stats.loc['min'])].dropna(how='all')\n   # print(df_daily_stats)\n   # print(df_daily_outliers)\n   outliers = df_daily_outliers.T.values.tolist()\n   outliers = [[x for x in y if not np.isnan(x)] for y in outliers]\n   df_daily_stats.loc[\"outliers\"] = outliers\n   # print(df_daily_stats)\n   return df_daily_stats\n\ndef mean(df):\n   df_daily_mean = df.describe()\n   return df_daily_mean.loc[[\"mean\"]]\n\ndef delay(df):\n   df['datetime'] = df.index\n   df['delta'] = (df['datetime'] - df['datetime'].shift()).fillna(pd.Timedelta(seconds=0))\n   df[\"delta\"] = df['delta'].dt.total_seconds().div(60).astype(int)\n   return df\n\ndef heatmap(df):\n   bins = [0, 1, 2, 5, 10, 30, 60, 120, 180]\n   names = ['0-1', \"1-2\", '2-5', \"5-10\", \"10-30\", \"30-60\", \"60-120\", \"120-180\", \"180+\"]\n   tags = [\"180+\", \"120-180\", \"60-120\", \"30-60\", \"10-30\", \"5-10\", '2-5', \"1-2\", '0-1']\n   d = dict(enumerate(names, 1))\n   df_delta = df\n   df_delta[\"hour\"] = df_delta.index.hour\n   df_delta[\"hour\"] = df_delta[\"hour\"].shift(1)\n   df_delta = df_delta.drop(['msg', 'datetime'], axis=1)\n   df_delta = df_delta.loc[df_delta[\"user\"].shift(1) != df_delta[\"user\"]]\n   df_delta['delta_rnd'] = np.vectorize(d.get)(np.digitize(df_delta['delta'], bins))\n   df_user = df_delta\n   df_user['count'] = 1\n   df2 = df_user.groupby(['delta_rnd','hour'], as_index=False).count()\n   df_p = pd.pivot_table(df2, 'count', 'delta_rnd', 'hour')\n   df_p = df_p.reindex(index=tags)\n   df_p.columns = df_p.columns.astype(str)\n   return df_p\n\ndef words(df):\n   total_str = \"\"\n   for val in df.msg:\n      val = str(val)\n      total_str += (val + \" \")\n   return total_str"},22075:function(t){"use strict";t.exports='# type: ignore\n\ndf_users = users(df)\n# print(type(df_users))\n\ndf_user_list = get_users(df)\n\ndf_timeline_users = group_func(df_users, timeline)\ndf_timeline_users.append(timeline(df))\n# print(df_timeline)\n# df_timeline_users = df_timeline_users.drop(columns=["user"])\ndf_timeline_dict = []\nfor x in df_timeline_users:\n   df_timeline_dict.append(x.to_json(orient="split", date_format="iso"))\n# df_timeline_dict = df_timeline.to_json(orient="split", date_format="iso")\n# print(df_timeline_dict)\n\ndf_daily = daily(df)\ndf_daily_users = group_func(df_users, daily)\ndf_daily_users_stats = group_func(df_daily_users, boxplot)\n# df_daily_users_stats.append(boxplot(df_daily))\ndf_daily_stats_dict = []\nfor x in df_daily_users_stats:\n   df_daily_stats_dict.append(x.to_json(orient="columns"))\n\n# df_daily_stats_dict = df_daily_users_stats.to_json(orient="columns")\n\ndf_hourly = hourly(df)\ndf_hourly_users = group_func(df_users, hourly)\ndf_hourly_users_stats = group_func(df_hourly_users, boxplot)\n# df_hourly_users_stats.append(boxplot(df_hourly))\ndf_hourly_stats_dict = []\nfor x in df_hourly_users_stats:\n   df_hourly_stats_dict.append(x.to_json(orient="columns"))\n\n# df_hourly_stats = boxplot(df_hourly)\n# print(df_hourly_stats)\n# df_hourly_stats_dict = df_hourly_stats.to_json(orient="columns")\n\ndf_p = heatmap(delay(df))\n# print(df_p)\ndf_heatmap = df_p.to_json(orient="columns")\n\ndf_words = words(df)\n\nprint("^^^^^^^^^^^^^ PYTHON ^^^^^^^^^^^^^")'},75410:function(){},48628:function(){},31601:function(){},67792:function(){},75042:function(){},18685:function(){},20067:function(){},55382:function(){},72095:function(){},72061:function(){},61219:function(){}},function(t){t.O(0,[774,599,849,524,124,888,179],(function(){return e=45301,t(t.s=e);var e}));var e=t.O();_N_E=e}]);